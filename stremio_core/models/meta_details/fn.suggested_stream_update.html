<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Find a stream from addon responses, which should be played if binge watching or continuing to watch. We’ve already loaded the next Video id and we need to find a proper stream for the binge watching."><title>suggested_stream_update in stremio_core::models::meta_details - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="stremio_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../stremio_core/index.html">stremio_core</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In stremio_core::models::meta_details</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../../index.html">stremio_core</a>::<wbr><a href="../index.html">models</a>::<wbr><a href="index.html">meta_details</a>::<wbr><a class="fn" href="#">suggested_stream_update</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/stremio_core/models/meta_details.rs.html#444-508">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>fn suggested_stream_update(
    suggested_stream: &amp;mut <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../common/resource_loadable/struct.ResourceLoadable.html" title="struct stremio_core::models::common::resource_loadable::ResourceLoadable">ResourceLoadable</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../types/resource/stream/struct.Stream.html" title="struct stremio_core::types::resource::stream::Stream">Stream</a>&gt;&gt;&gt;,
    selected: &amp;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.Selected.html" title="struct stremio_core::models::meta_details::Selected">Selected</a>&gt;,
    meta_items: &amp;[<a class="struct" href="../common/resource_loadable/struct.ResourceLoadable.html" title="struct stremio_core::models::common::resource_loadable::ResourceLoadable">ResourceLoadable</a>&lt;<a class="struct" href="../../types/resource/meta_item/struct.MetaItem.html" title="struct stremio_core::types::resource::meta_item::MetaItem">MetaItem</a>&gt;],
    meta_streams: &amp;[<a class="struct" href="../common/resource_loadable/struct.ResourceLoadable.html" title="struct stremio_core::models::common::resource_loadable::ResourceLoadable">ResourceLoadable</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../types/resource/stream/struct.Stream.html" title="struct stremio_core::types::resource::stream::Stream">Stream</a>&gt;&gt;],
    streams: &amp;[<a class="struct" href="../common/resource_loadable/struct.ResourceLoadable.html" title="struct stremio_core::models::common::resource_loadable::ResourceLoadable">ResourceLoadable</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../types/resource/stream/struct.Stream.html" title="struct stremio_core::types::resource::stream::Stream">Stream</a>&gt;&gt;],
    stream_bucket: &amp;<a class="struct" href="../../types/streams/streams_bucket/struct.StreamsBucket.html" title="struct stremio_core::types::streams::streams_bucket::StreamsBucket">StreamsBucket</a>,
) -&gt; <a class="struct" href="../../runtime/effects/struct.Effects.html" title="struct stremio_core::runtime::effects::Effects">Effects</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Find a stream from addon responses, which should be played if binge watching or continuing to watch.
We’ve already loaded the next Video id and we need to find a proper stream for the binge watching.</p>
<p>First find the latest <code>StreamItem</code> stored based on last <strong>30</strong> videos from current video
(ie. we’re in E4, so we’re going to check E4, E3, E2, E1 in this order until we hit a stored <code>StreamItem</code>).
Then with the stream item we try to find a stream from addon responses (including the streams inside the meta itself <code>meta_streams</code>) -
we find the responses from the addon based on <code>StreamItem.stream_transport_url</code>,
then first we try to find the stream based on equality (as otherwise stored stream might be expired/no longer valid),
if not found we try to find a stream based on it’s <code>StreamBehaviorHints.bingeGroup</code>.
One note, why we cannot return <code>StreamItem.stream</code> directly if it’s for the same episode,
is that user might have played a stream from an addon which he no longer has due to some constrains (ie p2p addon),
that’s why we have to try to find it first and verify that’s it’s still available.</p>
</div></details></section></div></main></body></html>